<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <title>NTU Food Map</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/business-casual.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
        rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic"
        rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- javascript sleep() -->
    <script>
    function sleep(milliseconds) {
     var start = new Date().getTime();
     for (var i = 0; i < 1e7; i++) {
         if ((new Date().getTime() - start) > milliseconds){
         break;
       }
      }
     }
  </script>
</head>

<body>

    <div class="brand" style="font-family:DFKai-sb; font-size:50px; color:orange;">台大美食地圖</div>
    <div class="address-bar" style="font-family:cursive; font-size:24px; color:brown;">NTU Food Map</div>

    <!-- Navigation原址↓ -->


    <div class="container">

        <div class="row">
            <div class="box">
                <div class="col-lg-12 text-center">
                    <div id="carousel-example-generic" class="carousel slide">
                        <!-- Indicators -->
                        <ol class="carousel-indicators hidden-xs">
                            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                        </ol>

                        <!-- Wrapper for slides -->
                        <div class="carousel-inner">
                            <div class="item active">
                                <img class="img-responsive img-full" src="http://screenshot.net/0g729sd.jpg" alt=""> 
                            </div>
                            <div class="item">
                                <img class="img-responsive img-full" src="http://screenshot.net/0pj9ds7.jpg" alt=""> 
                            </div>
                            <div class="item">
                                <img class="img-responsive img-full" src="http://screenshot.net/07mp4ho.jpg" alt=""> 
                            </div>
                        </div>

                        <!-- Controls -->
                        <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                            <span class="icon-prev"></span>
                        </a>
                        <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                            <span class="icon-next"></span>
                        </a>
                    </div>
                    <h2 class="brand-before">
                        <small>Welcome to</small>
                    </h2>
                    <h1 class="brand-name">National Taiwan University</h1>
                    <hr class="tagline-divider">
                    <h2>
                        <small>Let's
                            <strong>Get Some Delicious!!</strong>
                        </small>
                    </h2>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center" style="font-family:DFKai-sb; font-size:32px; color:red;">今天吃什麼?
                    </h2>
                    <hr>
                    <div class="col-sm-4">
                    </div>
                    <div class="col-sm-5">
                        
                        <form>
                            <span style="font-family:DFKai-sb; font-size:20px; color:black;">預算:</span>
                            <!--action="test.php" method="post"-->
                            <input id="budget" type="text" placeholder="必填" name="irrelevant" onkeyup="value=value.replace(/[^\d]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))"><br>
                        </form>
                        <p>

                            <form>
                                <span style="font-family:DFKai-sb; font-size:20px; color:black;">CP值要求(最低):</span>
                                <select id="CPValue">
                                <option >無限制</option>
                              　<option >1星</option>
                              　<option >2星</option>
　                              <option >3星</option>
　                              <option >4星</option>
                                <option >5星</option>
                                </select>
                            </form>
                            <p>
                                <form >
                                    <span style="font-family:DFKai-sb; font-size:20px; color:black;">時段:</span>
                                    <select id="timenow">
                                    <option >早餐</option>
　                                  <option >午餐</option>
　                                  <option >晚餐</option>
                                    </select>
                                </form><br>
                                
                                <a href="#" onclick="Sum();" class="btn btn-danger">
                                    <span class="glyphicon glyphicon-cutlery"></span> 開始覓食
                                </a>
                                <p>
                                    <!--<span id="output"></span>-->
                                    &nbsp;
                    </div>
                    <div class="col-sm-3">
                     <img class="img-responsive img-border img-right" src="http://screenshot.net/0mvgval.jpg" alt=""> 
                        </div>
                </div>
            </div>
            <table style="display:none" id="thetable" >
              <thead>
                <tr>
                  <th>名稱</th>
                  <th>價格</th>
                  <th>評價</th>
                  <th>時段</th>
                  <th>網址</th>
                </tr>
              </thead>
              <tbody>
                <tr data-table>
                  <td>韓式泡菜豬肉丼飯C餐</td>
                  <td data-price="129">129</td>
                  <td data-star="4">4</td>
                  <td data-diningtime="505">505</td>
                  <td data-site="韓泡豬C">http://noviceee.github.io/韓泡豬C.html</td>
                </tr>
                <tr data-table>
                  <td>6吋鮪魚美乃滋+甜餅</td>
                  <td data-price="129">129</td>
                  <td data-star="5">5</td>
                  <td data-diningtime="505">505</td>
                  <td data-site="SubwayTuna">http://noviceee.github.io/SubwayTuna.html</td>
                </tr>
                <tr data-table>
                  <td>一信麵家-照燒豬肉蛋包飯</td>
                  <td data-price="90">90</td>
                  <td data-star="2">2</td>
                  <td data-diningtime="73">73</td>
                  <td data-site="YixinPorkomurice">http://noviceee.github.io/YixinPorkomurice.html</td>
                </tr>
              </tbody>
            </table>
             </div>
            <script>
   var Sum =function() {
  // 將 id=pricerequest 的選取值取出來
  var a = $("#budget").val();
  a = parseInt(a);
  // 將 id=CPValue 的選取值取出來
  var bt = $("#CPValue").val();
  if("無限制" == bt){
    var b = 6;     
  }
  else if("1星" == bt){
    var b = 1;
  }
  else if("2星" == bt){
    var b = 2;
  }
  else if("3星" == bt){
    var b = 3;
  }
  else if("4星" == bt){
    var b = 4;
  }
  else if("5星" == bt){
    var b = 5;
  }
  // 將 id=timenow 的選取值取出來
  var ct = $("#timenow").val();
  if("早餐" == ct){
    var c = 7;
  }
  else if("午餐" == ct){
    var c = 8;
  }
  else if("晚餐" == ct){
    var c = 9;
  }
 
  if(isNaN(a)){
    document.location.href="http://noviceee.github.io/error.html" ;
    return;
  }

  var min = parseInt(window.thetable.rows.item(1).cells.item(1).innerText);
  var array = $("td[data-diningtime]");
  var g;
  for(g=2; g<=array.length; g++){
    if(parseInt(window.thetable.rows.item(g).cells.item(1).innerText)<min)
      min = parseInt(window.thetable.rows.item(g).cells.item(1).innerText);
  }
  if(a<min){
    document.location.href="http://noviceee.github.io/sorry.html" ;
    return;
  }

  var i;
  for(i=0;i<=5000;i++){
    var minim = 1 ;
    var maxim = array.length ;
    var arandom = Math.floor(Math.random() * ( maxim - minim + 1)) + minim ;  
    
    if((parseInt(window.thetable.rows.item(arandom).cells.item(1).innerText) <= a) && (parseInt(window.thetable.rows.item(arandom).cells.item(2).innerText) >= b) && (parseInt(window.thetable.rows.item(arandom).cells.item(3).innerText) % c == 1)){
      document.location.href=window.thetable.rows.item(arandom).cells.item(4).innerText ;
      return;
    }
    else if((parseInt(window.thetable.rows.item(arandom).cells.item(1).innerText) <= a) && (b == 6) && (parseInt(window.thetable.rows.item(arandom).cells.item(3).innerText) % c == 1)){ 
      document.location.href=window.thetable.rows.item(arandom).cells.item(4).innerText ;
      return;
    }
    else{
      continue;
    }
  }
 
  document.location.href="http://noviceee.github.io/sorry.html";
  
  // 將 c 顯示出來
  //$("#output").text(c);
}
</script>
        </div>
  <div class="container">
        <div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center"><strong>Taipei Main Campus</strong>
                    </h2>
                    <hr>
                    <a>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                     <img src="http://screenshot.net/593kqu4.jpg" width="1000px" height="893px" usemap="#map" > <!--舊圖http://screenshot.net/67894f6.jpg-->
                     <map name="map">
                     <area shape="polygon" coords="380,750,375,767,380,783,385,768" href="http://noviceee.github.io/Subway.html" title="Subway台大店">
                     <area shape="polygon" coords="397,403,392,416,398,431,402,416" href="http://noviceee.github.io/Xiaofu.html" title="小福">
                     <area shape="polygon" coords="179,577,173,595,179,610,186,597" href="http://noviceee.github.io/Yoshinoya.html" title="吉野家Yoshinoya">
                     <area shape="polygon" coords="621,235,614,251,620,268,626,253" href="http://noviceee.github.io/木子林.html" title="木子林日式料理">
                     </map>
                    </a>
                </div>
            </div>
        </div>
      </div>

    </div>
    <!-- /.container -->

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>Copyright &copy; noviceee.github.io/  &nbsp; 2016</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery-2.2.4.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!--引入my.js(Javascript可直接寫在此檔)-->
    <script src="js/my.js"></script>

    <!-- Script to Activate the Carousel -->
    <script>
    $('.carousel').carousel({
        interval: 3000 //changes the speed
    })
    </script>

</body>

</html>